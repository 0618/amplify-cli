version: 0.2
env:
  shell: bash
phases:
  build:
    commands:
      - source shared-scripts.sh && _waitForJobs publish_to_local_registry requirePrevJobsToSucceed
      - source ./shared-scripts.sh && _verifyVersionsMatch
  post_build:
    commands:
      - echo "Build Status"
      - echo $PROJECT_NAME
      - echo $BRANCH_NAME
      - echo "CODEBUILD_WEBHOOK_TRIGGER=$CODEBUILD_WEBHOOK_TRIGGER CODEBUILD_BUILD_SUCCEEDING=$CODEBUILD_BUILD_SUCCEEDING"
artifacts:
  files:
    - "shared-scripts.sh"
