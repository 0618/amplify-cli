version: 0.2
env:
  shell: bash
  variables:
    CI: true
    CIRCLECI: true
    IS_AMPLIFY_CI: true
phases:
  build:
    commands:
      - source ./shared-scripts.sh && _integrationTest
  post_build:
    commands:
      - echo "Build Status"
      - echo $PROJECT_NAME
      - echo $BRANCH_NAME
      - echo "CODEBUILD_WEBHOOK_TRIGGER=$CODEBUILD_WEBHOOK_TRIGGER CODEBUILD_BUILD_SUCCEEDING=$CODEBUILD_BUILD_SUCCEEDING"
artifacts:
  files:
    - $CODEBUILD_SRC_DIR/../aws-amplify-cypress-auth/cypress/videos/*
    - $CODEBUILD_SRC_DIR/../aws-amplify-cypress-auth/cypress/screenshots/*
    - $CODEBUILD_SRC_DIR/../aws-amplify-cypress-api/cypress/videos/*
    - $CODEBUILD_SRC_DIR/../aws-amplify-cypress-api/cypress/screenshots/*
