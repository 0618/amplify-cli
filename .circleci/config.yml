# auto generated file. Edit config.base.yaml if you want to change
version: 2.1
orbs:
  win: circleci/windows@2.2.0
machine:
  environment:
    PATH: '${PATH}:${HOME}/${CIRCLE_PROJECT_REPONAME}/node_modules/.bin'
nix_defaults: &nix_defaults
  working_directory: ~/repo
  docker:
    - image: 'circleci/node:10.18'
  resource_class: large
win_defaults: &win_defaults
  working_directory: C:\home\circleci\repo
  executor:
    name: win/default
    shell: cmd.exe
mac_defaults: &mac_defaults
  macos:
    xcode: 11.3.0
jobs:
  install_script_sanity_check_linux:
    <<: *nix_defaults
    steps:
      - checkout
      - run: ./install
      - run: echo "export PATH=$PATH:$HOME/.amplify/bin" >> $BASH_ENV
      - run: amplify version
  install_script_sanity_check_windows:
    <<: *win_defaults
    steps:
      - checkout
      - run: copy install-win install-win.cmd
      - run: install-win.cmd
      - run: amplify version
  install_script_sanity_check_mac:
    <<: *mac_defaults
    steps:
      - checkout
      - run: ./install
      - run: echo "export PATH=$PATH:$HOME/.amplify/bin" >> $BASH_ENV
      - run: amplify version
workflows:
  version: 2
  install_script_sanity_checks:
    jobs:
      - install_script_sanity_check_linux
      - install_script_sanity_check_windows
      - install_script_sanity_check_mac