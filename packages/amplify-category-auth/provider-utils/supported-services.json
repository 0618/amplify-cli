{
	"Cognito": {
		"inputs": [
			{
				"key": "identityPoolName",
				"set": "core",
				"question": "Please enter a name for your identity pool.",
				"required": true,
				"validation": {
					"operator": "regex",
					"value": "^.{1,128}$",
					"onErrorMsg": "The identity pool name must be at least 1 character and no more than 128."
				}
			},
			{
				"key": "allowUnauthenticatedIdentities",
				"set": "core",
				"question": "Do you want to allow unauthenticated logins?.",
				"type": "confirm",
				"required": true
			},
			{
				"key": "thirdPartyAuth",
				"set": "core",
				"question": "Do you want to enable 3rd party authentication providers in your identity pool?",
				"type": "confirm",
				"required": true
			},
			{
				"key": "authProviders",
				"set": "core",
				"question": "Select the 3rd party authentication providers that you want to enable: ",
				"type": "multiselect",
				"required": true,
				"map": "authProviders",
				"andConditions": [
					{
						"key": "thirdPartyAuth",
						"value": true,
						"operator": "="
					}
				]
			},
			{
				"key": "facebookAppId",
				"set": "core",
				"prefix": " \n You've opted to allow users to authenticate via Facebook.  If you haven't already, you'll need to go to https://developers.facebook.com and create an App ID. \n",
				"question": "Enter your Facebook App ID: ",
				"andConditions": [
					{
						"key": "authProviders",
						"value": "graph.facebook.com",
						"operator": "includes"
					}
				]
			},
			{
				"key": "googleClientId",
				"set": "core",
				"prefix": " \n You've opted to allow users to authenticate via Google.  If you haven't already, you'll need to go to https://developers.google.com/identity and create an App ID. \n",
				"question": "Enter your Google Client ID: ",
				"andConditions": [
					{
						"key": "authProviders",
						"value": "accounts.google.com",
						"operator": "includes"
					}
				]
			},
			{
				"key": "amazonAppId",
				"set": "core",
				"prefix": " \n You've opted to allow users to authenticate via Amazon.  If you haven't already, you'll need to create an Amazon App ID. \n",
				"question": "Enter your Amazon App ID: ",
				"andConditions": [
					{
						"key": "authProviders",
						"value": "www.amazon.com",
						"operator": "includes"
					}
				]
			},
			{
				"key": "twitterConsumerKey",
				"set": "core",
				"prefix": " \n You've opted to allow users to authenticate via Twitter.  If you haven't already, you'll need to create a Twitter Consumer Key and a Twitter Consumer Secret. \n",
				"question": "Enter your Twitter Consumer Key: ",
				"andConditions": [
					{
						"key": "authProviders",
						"value": "api.twitter.com",
						"operator": "includes"
					}
				]
			},
			{
				"key": "twitterConsumerSecret",
				"set": "core",
				"question": "Enter your Twitter Consumer Secret: ",
				"andConditions": [
					{
						"key": "authProviders",
						"value": "api.twitter.com",
						"operator": "includes"
					}
				]
			},
			{
				"key": "userPoolName",
				"set": "core",
				"question": "Please provide a name for your user pool:",
				"required": true,
				"andConditions": [
					{
						"key": "authSelections",
						"value": "identityPoolAndUserPool",
						"operator": "="
					}
				]
			},
			{
				"key": "mfaConfiguration",
				"set": "core",
				"question": "Please choose a multifactor authentication (MFA) configuration:",
				"required": true,
				"type": "list",
				"options": [
					"ON",
					"OFF",
					"OPTIONAL"],
				"andConditions": [
					{
						"key": "authSelections",
						"value": "identityPoolAndUserPool",
						"operator": "="
					}
				]
			},
			{
				"key": "smsAuthenticationMessage",
				"set": "core",
				"question": "Please specify an SMS authentication message:",
				"required": true,
				"type": "input",
				"validation": {
					"operator": "includes",
					"value": "{####}",
					"onErrorMsg": "Your SMS authentication message must include '{####}' representing the authentication code that the user will receive."
				},
				"andConditions": [
					{
						"key": "authSelections",
						"value": "identityPoolAndUserPool",
						"operator": "="
					},
					{
						"key": "mfaConfiguration",
						"value": "OFF",
						"operator": "!="
					}
				]
			},
			{
				"key": "smsVerificationMessage",
				"set": "core",
				"question": "Please specify an SMS verification message:",
				"required": true,
				"type": "input",
				"validation": {
					"operator": "includes",
					"value": "{####}",
					"onErrorMsg": "Your SMS verification message must include '{####}' representing the verification code that the user will receive."
				},
				"andConditions": [
					{
						"key": "authSelections",
						"value": "identityPoolAndUserPool",
						"operator": "="
					},
					{
						"key": "mfaConfiguration",
						"value": "OFF",
						"operator": "!="
					}
				]
			},
			{
				"key": "defaultPasswordPolicy",
				"set": "core",
				"question": "Do you want to use the default password policy for this User Pool?",
				"required": true,
				"type": "confirm",
				"andConditions": [
					{
						"key": "authSelections",
						"value": "identityPoolAndUserPool",
						"operator": "="
					}
				]
			},
			{
				"key": "passwordPolicyMinLength",
				"set": "core",
				"question": "Enter the minimum password length for this User Pool:",
				"required": true,
				"type": "input",
				"validation": {
					"operator": "range",
					"value": {"min": 6, "max": 98},
					"onErrorMsg": "The minimum password length must be a number and must be greater than 5 and less than 99."
				},
				"andConditions": [
					{
						"key": "defaultPasswordPolicy",
						"value": false,
						"operator": "="
					},
					{
						"key": "authSelections",
						"value": "identityPoolAndUserPool",
						"operator": "="
					}
				]
			},
			{
				"key": "passwordPolicyCharacters",
				"set": "core",
				"question": "Select the password character requirements for your userpool:",
				"required": true,
				"type": "multiselect",
				"options": [
					"Requires Lowercase",
					"Requires Uppercase",
					"Requires Numbers",
					"Requires Symbols"
				],
				"andConditions": [
					{
						"key": "defaultPasswordPolicy",
						"value": false,
						"operator": "="
					},
					{
						"key": "authSelections",
						"value": "identityPoolAndUserPool",
						"operator": "="
					}
				]
			},
			{
				"key": "requiredAttributes",
				"set": "core",
				"question": "Userpool users are created with a standard set of attributes defined by the OpenID Connect specification.  Mark the required attributes below:",
				"required": true,
				"type": "multiselect",
				"map": "coreAttributes",
				"andConditions": [
					{
						"key": "authSelections",
						"value": "identityPoolAndUserPool",
						"operator": "="
					}
				]
			},
			{
				"key": "createUserpoolClient",
				"set": "app-client",
				"question": "Do you want to create an App Client for your Userpool?",
				"required": true,
				"type": "confirm",
				"andConditions": [
					{
						"key": "authSelections",
						"value": "identityPoolAndUserPool",
						"operator": "="
					}
				]
			},
			{
				"key": "userpoolClientName",
				"set": "app-client",
				"question": "Provide a name for the App Client: ",
				"required": true,
				"validation": {
					"operator": "regex",
					"value": "^.{1,128}$",
					"onErrorMsg": "The user pool name must be at least 1 character and no more than 128."
				},
				"andConditions": [
					{
						"key": "createUserpoolClient",
						"value": true,
						"operator": "="
					}
				]
			},
			{
				"key": "userpoolClientAuthFlow",
				"set": "app-client",
				"question": "Select the authentication flow you want to use:",
				"required": true,
				"type": "multiselect",
				"map": "authFlowMap",
				"andConditions": [
					{
						"key": "createUserpoolClient",
						"value": true,
						"operator": "="
					}
				]
			},
			{
				"key": "userpoolClientRefreshTokenValidity",
				"set": "app-client",
				"question": "Specify the app's refresh token expiration period (in days):",
				"required": true,
				"andConditions": [
					{
						"key": "createUserpoolClient",
						"value": true,
						"operator": "="
					}
				],
				"validation": {
					"operator": "range",
					"value": {"min": 1, "max": 365},
					"onErrorMsg": "Token expiration should be between 1 to 365 days."
				}
			},
			{
				"key": "userpoolClientSetAttributes",
				"set": "app-client",
				"question": "Do you want to specify the user attributes this app can read and write?",
				"required": true,
				"type":"confirm",
				"andConditions": [
					{
						"key": "createUserpoolClient",
						"value": true,
						"operator": "="
					}
				]
			},
			{
				"key": "userpoolClientReadAttributes",
				"set": "app-client",
				"question": "Specify read attributes:",
				"required": true,
				"type": "multiselect",
				"map" : "appClientReadAttributes",
				"andConditions": [
					{
						"key": "createUserpoolClient",
						"value": true,
						"operator": "="
					},
					{
						"key": "userpoolClientSetAttributes",
						"value": true,
						"operator": "="
					}
				]
			},
			{
				"key": "userpoolClientWriteAttributes",
				"set": "app-client",
				"question": "Specify write attributes:",
				"required": true,
				"type": "multiselect",				
				"map": "coreAttributes",
				"requiredOptions": "requiredAttributes",
				"andConditions": [
					{
						"key": "createUserpoolClient",
						"value": true,
						"operator": "="
					},
					{
						"key": "userpoolClientSetAttributes",
						"value": true,
						"operator": "="
					}
				]
			}
		],
		"cfnFilename": "auth-template.yml.ejs",
		"defaultValuesFilename": "cognito-defaults.js",
		"serviceWalkthroughFilename": "auth-questions.js",
		"stringMapFilename": "string-maps.js",
		"provider": "amplify-provider-awscloudformation"
	}
}